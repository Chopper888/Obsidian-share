/* @settings

name: "Pseudo-WYSIWYG"
id: global
settings:
    - id: mobile
      title: Mobile support
      description: Add the mobile support instead of pc
      type: class-toggle
    - id: blockquote
      title: Blockquote 
      description: Add nice blockquote. 
      type: class-toggle
    - id: color-blockquote
      title: Blockquote border color
      description: change the blockquote color
      type: variable-color
      opacity: false
      format: hex
      default: "#54b6c0"
    - id: bg-blockquote
      title: Blockquote background color
      description: change the background color
      type: variable-color
      opacity: true
      format: hex
      default: "#d1b8b8"

*/

:root {
    --color-blockquote: #54b6c0;
    --bg-blockquote: #d1b8b8;
}

.cm-s-obsidian .CodeMirror-line *, .mobile .cm-s-obsidian * {
    -webkit-font-smoothing: auto;
}


/* Remove markdown clutter */

.CodeMirror-activeline > .CodeMirror-line span.cm-formatting:not(span.cm-formatting-list) {
    font-size: xx-small;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting,
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-image.cm-image-alt-text.cm-link, 
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-string.cm-url,
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-link,
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-link:not(.cm-link), 
.mobile .cm-string.cm-url,
.mobile .cm-formatting-link:not(.cm-link),
.mobile .cm-hmd-barelink,
.mobile .cm-hmd-internal-link,
.mobile .cm-comment,
.mobile .cm-s-obsidian span.cm-hmd-escape-backslash, 
.mobile .cm-attribute {
    display: none;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting.cm-formatting-image.cm-image.cm-image-alt-text.cm-link,
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting.cm-formatting-image.cm-image.cm-image-marker {
    display: inline !important;
    opacity: 0 !important;
}


.CodeMirror-line span.cm-formatting.cm-formatting-code-block.cm-hmd-codeblock, div:not(.CodeMirror-activeline)> .CodeMirror-line span.cm-formatting.cm-formatting-code-block.cm-hmd-codeblock {
    font-size: var(--editor-font-size) !important;
    display: inline !important;
}

span.cm-formatting.cm-formatting-list.cm-formatting-list-ol.cm-list-1 {
    visibility: visible;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-tag {
    opacity: 0.5;
}

.cm-formatting.cm-formatting-link.cm-link {
    font-size: inherit !important;
    display: inline !important;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-comment {
    opacity: 0.1;
}


/* except list markers */

span.cm-formatting-list,
span.cm-formatting-code-block.cm-hmd-codeblock,
span.cm-formatting-task, 
.mobile span.cm-formatting-list,
.mobile span.cm-formatting-code-block.cm-hmd-codeblock {
    display: inline !important;
    font-family: var(--font-monospace);
    visibility: visible !important;
    opacity: 1;
    color: var(--text-faint)
}


/* Blockquote: in edit mode with left border rendered instead of > */

.blockquote div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting.cm-formatting-quote,
div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-hmd-indent-in-quote {
    display: inline !important;
    color: transparent !important;
}

.blockquote div:not(.CodeMirror-activeline)>.HyperMD-quote {
    background-color: var(--bg-blockquote);
    border-left: 3px solid var(--text-selection);
    border-color: var(--color-blockquote) !important;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-hashtag-end:before {
    content: '';
}

.wys-enhanced  div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-escape:not(.cm-s-obsidian span.cm-hmd-escape-backslash),
.wys-enhanced  div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-hr{
    color: transparent;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-hr:after {
    content: "";
    position: absolute;
    height: 1px;
    width: 100%;
    background: var(--background-modifier-border);
    left: 0;
    top: 50%;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-hmd-escape-backslash {
    opacity: 0.1 !important;
}

/* Checkboxes instead of brackets in edit mode */

.wys-enhanced div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-task.cm-meta,
.wys-enhanced div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-task.cm-property {
    color: transparent;
    position: relative;
    display: inline !important;
    margin-right: 1%;
}

.wys-enhanced div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-task.cm-meta:after {
    content: "☐" !important;
    position: absolute;
    top: 3px;
    left: 0px;
    color: var(--tag) !important;
    font-size: 30px;
    display: inline !important;
    visibility: visible !important;
    opacity: 1;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-task.cm-property:after, 
.wys-enhanced div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-task.cm-property:after {
    content: "☒" !important;
    position: absolute;    
    top: 3px;
    left: 0px;
    color: var(--tag) !important;
    font-size: 30px;
    display: inline !important;
    visibility: visible !important; 
}

span.cm-formatting-task.cm-property~span {
    color: var(--text-faint) !important;
}

.cm-s-obsidian span.cm-url {
    color: rgb(15, 112, 223) !important;
    text-decoration: underline;
    z-index: -99999;
    display: inline !important;
    font-size: 0;
}


span.cm-formatting.cm-formatting-link-string.cm-string.cm-url {
    font-size: 0 !important;
}

.CodeMirror-line span.cm-formatting {
    display: inline !important;
}

.cc-pretty-editor .cm-s-obsidian pre.HyperMD-list-line {
    padding: 0;
}

.cm-s-obsidian span.cm-formatting-list {
    color: var(--text-muted) !important;
}

.outliner-plugin-bls .cm-s-obsidian span.cm-formatting-list-ul {
    color: transparent !important;
}

.cm-s-obsidian .HyperMD-table-row {
    white-space: normal;
}

.outliner-plugin-bls .cm-s-obsidian .HyperMD-list-line {
    padding-top: 0 !important;
}

div:not(.CodeMirror-activeline)>.CodeMirror-line span.cm-formatting-header {
    display: none !important;
}

span.cm-formatting.cm-formatting-strong.cm-strong,
span.cm-formatting.cm-formatting-em.cm-em {
    font-size: 50%;
}

.cm-s-obsidian pre.HyperMD-codeblock span.cm-formatting-code-block {
    opacity: 0.3;
}

pre.HyperMD-table-2.HyperMD-table-row>span>span.cm-string.cm-url {
    color: var(--blue) !important;
    display: inline !important;
    font-size: 100% !important;
    opacity: 0.3;
}

/* H1 Underline */
.CodeMirror .CodeMirror-line.HyperMD-header-1, .mobile .hyperMD-header-1 {
  border-bottom: 1px solid var(--text-normal) !important;
}

/* ============= Style settings Mobile specific ================================= */
.mobile .cm-formatting:not(.cm-formatting-list, .cm-formatting-task) {
    opacity: 0.1 ;
    font-size: xx-small;
}
.mobile .cm-hmd-barelink,
.mobile .cm-formatting-link:not(.cm-link),
.mobile .cm-hmd-internal-link {
    color: var(--text-accent) !important;
    display: inline !important;
    opacity: 0.5 !important;
}

.mobile .cm-formatting.cm-formatting-link.cm-link {
    font-size: small !important ;
}
.mobile .markdown-preview-section hr {
    margin: 0 !important;
}

.mobile .markdown-preview-section hr:after {
    background: lightgrey !important;
    opacity: 100%;
}

.mobile .cm-hr, .mobile span.cm-hr {
    color: transparent !important;
    content: '' !important;
}

.mobile .cm-hr:after, .mobile span.cm-hr:after {
    content: "" !important;
    position: absolute !important;
    height: 3px !important;
    width: 80% !important;
    font-weight: bold !important;
    background: var(--text-faint) !important;
    left: 10% !important;
    margin-top: 1% !important;
}

.mobile .cm-formatting-task.cm-meta,
.mobile .cm-formatting-task.cm-property, .mobile .wys-enhanced span.cm-formatting-task.cm-meta,
.mobile .wys-enhanced span.cm-formatting-task.cm-property {
    color: transparent;
    position: relative;
    display: none;
    margin-right: -0.1rem;
}

.mobile .cm-formatting-task.cm-property:after, 
.mobile .wys-enhanced .cm-formatting-task.cm-meta:after, 
.mobile .wys-enhanced span.cm-formatting-task.cm-property:after, .mobile .cm-formatting-task.cm-meta:after {
    content: "☐" !important;
    color: var(--text-accent) !important;
    position: absolute;
    top: 3px;
    left: 0;
    font-size: 35px !important;
    display: inline !important;
    visibility: visible !important;
    opacity: 100% !important;
}

.mobile span.cm-formatting-task.cm-property:after, 
.mobile .wys-enhanced span.cm-formatting-task.cm-property:after {
    content: "☑" !important;
    color: var(--text-accent) !important;
    font-size: 35px !important;
    display: inline !important;
    visibility: visible !important; 
    opacity: 100% !important;
    position: absolute;
    top: 3px;
    left: 0;
}

.mobile .cm-formatting.cm-formatting-image.cm-image.cm-image-alt-text.cm-link, .mobile 
.cm-formatting.cm-formatting-image.cm-image.cm-image-marker {
    display: inline !important;
}

.mobile .cm-s-obsidian span.cm-url {
    color: rgb(15, 112, 223) !important;
    text-decoration: underline;
    display: inline !important;
    font-size: 10px;
}

.mobile span.cm-formatting.cm-formatting-link-string.cm-string.cm-url, .mobile .cm-string .cm-url {
    font-size:inherit !important;
}